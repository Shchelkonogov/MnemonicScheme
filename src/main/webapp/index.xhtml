<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>
    <f:viewParam name="objectId" value="#{mnemonicC.objectId}"/>
    <f:viewParam name="sessionId" value="#{mnemonicC.sessionId}"/>
    <f:viewAction action="#{mnemonicC.initLoad}"/>
</f:metadata>
<h:head>
    <meta content="UTF-8"/>
    <title>Мнемосхема#{mnemonicC.objectName}</title>
    <h:outputScript library="js" name="script.js?#{mnemonicAppController.version}"/>
<!--    <script type="application/javascript" src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>-->
    <h:outputScript library="js" name="svg-pan-zoom.local.js"/>
<!--    <script type="application/javascript" src="https://unpkg.com/@ungap/url-search-params"></script>-->
    <h:outputScript library="js" name="URLSearchParams_polyfill.local.js"/>

    <style type="text/css">
        #container {
            border: 1px solid black;
            width: 100%;
            box-sizing: border-box;
            height: calc(100vh - 20px);
            min-width: 800px;
            min-height: 400px;
        }
    </style>
</h:head>
<h:body>
    <h:form>
        <p:remoteCommand name="jsCall" action="#{mnemonicC.jsCall}" oncomplete="PF('dlg').show();" update="results"/>
        <p:remoteCommand name="redirectJSF" action="#{mnemonicC.redirect}"/>
        <div id="container">
            <object data="#{request.contextPath}#{mnemonicC.svgName}" type="image/svg+xml" id="svgDocument" style="width: 100%; height: 100%"/>
        </div>
        <h:panelGroup id="results">
            <p:dialog header="Modal Dialog" widgetVar="dlg" modal="true" height="100">
                <h:outputText value="#{mnemonicC.hello}"/>
            </p:dialog>
        </h:panelGroup>
    </h:form>
    <h:form id="dataForm">
        <h:inputHidden id="iframeID" value="#{request.getParameter('iframeID')}"/>
    </h:form>
</h:body>
</html>
